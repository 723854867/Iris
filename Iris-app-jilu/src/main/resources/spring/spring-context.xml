<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    			 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">
    			 
    <bean class="org.Iris.app.jilu.common.AppConfig">
		<property name="env" value="${env}" />
		<property name="captchaDigit" value="${captcha.digit}" />
		<property name="captchaLifeTime" value="${captcha.life.time}" />
		<property name="captchaCountMaximum" value="${captcha.count.maximum}" />
		<property name="captchaCountLifeTime" value="${captcha.count.lift.time}" />
		<property name="redisLockTimeout" value="${redis.lock.timeout}" />
		
		<property name="aliyunOssBucket" value="${aliyun.oss.bucket}" />
		<property name="aliyunStsRoleArn" value="${aliyun.sts.role.arn}" />
		<property name="aliyunOssEndpoint" value="${aliyun.oss.endpoint}" />
		<property name="aliyunOssFolderPrefix" value="${aliyun.oss.folder.prefix}" />
	</bean>
	
	<context:component-scan base-package="org.Iris.app.jilu" />
        
	<bean id="lang" class="org.Iris.app.jilu.service.JiLuLang">
		<constructor-arg index="0" value="classpath:locale/locale_${locale}.properties" />
	</bean>
	
	<bean id="jiLu" class="org.Iris.app.jilu.service.JiLu" init-method="start" destroy-method="stop">
		<constructor-arg index="0" value="${app.name}" />
		<property name="jmsService" ref="jmsService" />
		<property name="aliyunService" ref="aliyunService" />
		<property name="wyyxService" ref="wyyxService" />
		<property name="locale" ref="lang" />
	</bean>
	
	 <!-- httpclient 配置 -->
    <bean id="httpProxy" class="org.Iris.util.network.http.HttpProxy">
		<property name="syncHttp" ref="syncHttp"/>
	</bean>
	<bean id="syncHttp" class="org.Iris.util.network.http.SyncHttpAdapter">
		<property name="sslEnabled" value="true" />
		<property name="retryCount" value="3" />							<!-- 失败重连次数 -->
		<property name="maxConn" value="200" />								<!-- 最大连接数 -->
		<property name="maxConnPerRoute" value="200" />						<!-- 每个路由能打开的最大连接数 -->
		<property name="keepAliveTime" value="30000" />						<!-- 空闲连接回收超时时间 30s -->
	</bean>
	
	<bean class="org.Iris.core.util.SpringContextUtil" />
	
	<import resource="spring-mybatis.xml" />
	<import resource="spring-redis.xml"/>
	<import resource="spring-activemq.xml"/>
	<import resource="spring-aliyun.xml"/>
	<import resource="spring-igt.xml"/>
</beans>