require(["../libs/jquery-2.1.4","head","../common/info","../common/aler","../service/service"],function(t,e,i,n,a){var r=i.getCookie("uid"),s=i.getRequestPrefix(),o=[],c={init:function(){$(".userPortrait").on("click",function(){var t=$(this).attr("data-userId");""!=t&&personalDetail.goPage("userId",t)});$("#serverUrlimg").val();c.renderPraiseList(),$("#btnMore").on("click",function(){c.addMore()}),$(".downClose").click(function(){_czc.push(["_trackEvent","关闭点赞的人下载按钮","closeBottomDownload"])})},picTap:function(){$(".userPortrait").on("click",function(){var t=$(this).attr("data-userId"),e=i.getCookie("uid"),n=i.getRequestPrefix()+"/page/user/userDetail?userId="+t+"&uid="+e;c.Jump(t,e,n)})},Jump:function(t,e,i){""!=t&&(window.location.href=i)},renderPraiseList:function(){var t=window.location.search,e=parseInt(t.split("=")[1]),i=0,n=10;a.getVideoPraiseList(e,i,n).done(function(t){c.myPraiseList(t.result,".recommendContent")})},myPraiseList:function(t,e){""==t&&n.alertMsg("竟然没有已经赞的人了"),$.each(t,function(t,n){var a,r=n.praiseId;1==n.vipStat?a='<img class="user_icon_blue" src="'+i.getRequestPrefix()+'/img/icons-2x/user_icon_blue.png" />':2==n.vipStat?a='<img class="user_icon_yellow" src="'+i.getRequestPrefix()+'/img/icons-2x/user_icon_yellow.png" />':3==n.vipStat?a='<img class="user_icon_green" src="'+i.getRequestPrefix()+'/img/icons-2x/user_icon_green.png" />':0==n.vipStat&&(a="");var s;s=""==n.signature?"懒人没前途o(∩_∩)o 哈哈~":n.signature;var c;0==n.attention?c="attenBtn":1==n.attention&&(c="attenBtnActive");var u='<div><img class="fl userPortrait" data-userId="'+n.id+'" data-userPic="'+n.pic+'" alt="" onerror="this.src=\'/restwww/img/icons-2x/user_icon_24px.png\'">'+a+'<span class="reTitle">'+n.name+'</span><br><span class="reName">'+s+'</span><a class="atten" href="javascript:void(0);"><em class="'+c+' att" data-isAttention="'+n.attention+'" data-userid="'+n.id+'"></em></a></div>';$(e).append(u),o.push(r)}),i.personalPortrait(serverUrlimg,".userPortrait");var a=$(".atten"),s=$(".att");$(".atten").each(function(){$(this).find("em").attr("data-userId")==r&&($(this).hide(),$(this).prev().text("懒人没前途o(∩_∩)o 哈哈~"))}),c.tapPraise(a,s,r),c.picTap()},tapPraise:function(t,e,i,r,o){e.click(function(){var t="h5",e=$(this).attr("data-userId"),r=$(this).attr("data-isAttention");if(0==i)return n.alertMsg("未登录，请登录后操作！"),void setTimeout(function(){window.location.href=s+"/page/user/login"},1e3);if(0==r){var o=this;a.addAttention(e,t,r).done(function(t){$(o).attr("data-isAttention","1"),$(o).removeClass("attenBtn").addClass("attenBtnActive")})}else if(1==r){var o=this;a.addAttention(e,t,r).done(function(t){$(o).attr("data-isAttention","0"),$(o).removeClass("attenBtnActive").addClass("attenBtn")})}})},addMore:function(){var t=window.location.search,e=t.split("=")[1],i=o.sort()[0];console.log(o.sort()[0]);var n=20;a.getVideoPraiseList(e,i,n).done(function(t){c.myPraiseList(t.result,".recommendContent")})}};c.init()});