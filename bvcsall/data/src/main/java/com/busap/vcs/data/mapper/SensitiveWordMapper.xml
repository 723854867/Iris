<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.busap.vcs.data.mapper.SensitiveWordDao">

    <resultMap id="BaseResultMap" type="com.busap.vcs.data.entity.SensitiveWord">
        <id column="id" property="id"/>
        <result column="create_at" property="createDate"/>
        <result column="modify_at" property="modifyDate"/>
        <result column="data_from" property="dataFrom"/>
        <result column="creator_id" property="creatorId"/>
        <result column="status" property="status"/>
        <result column="word" property="word"/>
    </resultMap>

    <sql id="page">limit #{pageStart},#{pageSize}</sql>

    <sql id="where_sql">
        <where>
            <if test="word != null and word != ''">
                AND word LIKE CONCAT('%',#{word,jdbcType=VARCHAR},'%')
            </if>
            <if test="keyword != null and keyword != ''">
                AND word = #{keyword,jdbcType=VARCHAR}
            </if>
        </where>
    </sql>

    <select id="select" resultMap="BaseResultMap" parameterType="java.util.Map">
        SELECT
        id,
        create_at,
        modify_at,
        data_from,
        creator_id,
        status,
        word
        FROM sensitive_word
        <include refid="where_sql"/>
        <!--<include refid="page"/>-->
    </select>

<!--    <select id="selectCount" resultType="java.lang.Integer" parameterType="map">
        SELECT
        COUNT(1)
        FROM sensitive_word
        <include refid="where_sql"/>
    </select>-->

    <update id="update" parameterType="com.busap.vcs.data.entity.SensitiveWord">
        UPDATE sensitive_word
        <set>
            <if test="id != null">
                id = #{id,jdbcType=BIGINT},
            </if>
            <if test="modifyDate != null">
                modify_at = #{modifyDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dataFrom != null and dataFrom!=''">
                data_from = #{dataFrom,jdbcType=VARCHAR},
            </if>
            <if test="creatorId != null">
                creator_id = #{creatorId,jdbcType=INTEGER},
            </if>
            <if test="status != null">
                status = #{status,jdbcType=INTEGER},
            </if>
            <if test="word != null">
                word = #{word,jdbcType=VARCHAR},
            </if>
        </set>
        WHERE id = #{id,jdbcType=BIGINT}
    </update>

    <insert id="batchInsertSensitiveWord">
        INSERT INTO sensitive_word (
        create_at,
        creator_id,
        status,
        word
        )
        VALUES
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.createDateStr},#{item.creatorId},#{item.status},#{item.word})
        </foreach>
    </insert>

    <insert id="insert" parameterType="com.busap.vcs.data.entity.SensitiveWord" useGeneratedKeys="true"
            keyProperty="id">
        INSERT INTO sensitive_word
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="createDateStr != null">
                create_at,
            </if>
            <if test="modifyDate != null">
                modify_at,
            </if>
            <if test="dataFrom != null and dataFrom!=''">
                data_from,
            </if>
            <if test="creatorId != null">
                creator_id,
            </if>
            <if test="status != null">
                status,
            </if>
            <if test="word != null">
                word,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="createDateStr != null">
                #{createDateStr,jdbcType=TIMESTAMP},
            </if>
            <if test="modifyDate != null">
                #{modifyDate,jdbcType=TIMESTAMP},
            </if>
            <if test="dataFrom != null and dataFrom!=''">
                #{dataFrom,jdbcType=VARCHAR},
            </if>
            <if test="creatorId != null">
                #{creatorId,jdbcType=INTEGER},
            </if>
            <if test="status != null">
                #{status,jdbcType=INTEGER},
            </if>
            <if test="word != null">
                #{word,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        DELETE FROM sensitive_word
        WHERE
        id = #{id,jdbcType=BIGINT};
    </delete>

    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        SELECT
        id,
        create_at,
        modify_at,
        data_from,
        creator_id,
        status,
        word
        FROM sensitive_word
        WHERE
        id = #{id,jdbcType=BIGINT}
    </select>

</mapper>
