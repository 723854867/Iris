<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.busap.vcs.data.mapper.LabelDAO">

   <sql id="page">limit #{pageStart},#{pageSize}</sql>

   <sql id="where_sql">
      <where>
         <if test="id != null">
            AND id = #{id,jdbcType=INTEGER}
         </if>
         <if test="name != null and name != ''">
            AND name LIKE CONCAT('%',#{name,jdbcType=VARCHAR},'%')
         </if>
         <if test="num != null">
            AND num = #{num,jdbcType=INTEGER}
         </if>
         <if test="creatorId != null">
            AND creator_id = #{creatorId,jdbcType=INTEGER}
         </if>
         <if test="createDate != null">
            AND create_at = #{createDate,jdbcType=TIMESTAMP}
         </if>
         <if test="modifyDate != null">
            AND modify_date = #{modifyDate,jdbcType=TIMESTAMP}
         </if>
         <if test="timeStamp != null">
            AND time_stamp = #{timeStamp,jdbcType=TIMESTAMP}
         </if>
         <if test="dataFrom != null and dataFrom != ''">
            AND data_from = #{dataFrom,jdbcType=VARCHAR}
         </if>
      </where>
   </sql>

   <select id="selectLabels" resultType="java.util.Map">
      SELECT
      id,
      name,
      num,
      create_at AS createDate,
      creator_id AS creatorId,
      modify_date AS modifyDate,
      time_stamp AS timeStamp,
      data_from AS dataFrom
      FROM label
      <include refid="where_sql"/>
      <include refid="page"/>
   </select>

   <select id="selectLabelsCount" resultType="java.lang.Integer" parameterType="map">
      SELECT
      COUNT(1)
      FROM label
      <include refid="where_sql"/>
   </select>

</mapper>
