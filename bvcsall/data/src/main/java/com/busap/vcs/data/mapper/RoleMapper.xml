<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.busap.vcs.data.mapper.RoleDao">

    <sql id="page">limit #{pageStart},#{pageSize}</sql>

	<!--活动管理列表查询-->
	<sql id="where_sql">
		<where>
			<if test="id != null">
				AND id = #{id}
			</if>
		</where>
	</sql>

	<select id="select" parameterType="java.util.Map" resultType="com.busap.vcs.data.entity.Role">
		SELECT
		a.id,
		a.create_at AS createDate,
		a.creator_id AS createorId,
		a.modify_at AS modifyDate,
		a.description,
		a.is_system AS isSystem,
		a.name,
		a.data_from AS dataFrom,
		a.status
		FROM role a
		<include refid="where_sql"/>
		ORDER BY a.id DESC
	</select>

<!--	<select id="selectCount" resultType="java.lang.Integer" parameterType="java.util.Map">
		SELECT
		COUNT(1)
		FROM role
		<include refid="where_sql"/>
	</select>-->

	<update id="update" parameterType="com.busap.vcs.data.entity.Role">
		UPDATE role
		<set>
			<if test="id != null">
				id = #{id,jdbcType=INTEGER},
			</if>
			<if test="name != null and name != ''">
				name = #{name,jdbcType=VARCHAR},
			</if>
			<if test="description != null and description != ''">
				description = #{description,jdbcType=VARCHAR},
			</if>
			<if test="createDateStr != null">
				create_at = #{createDateStr,jdbcType=TIMESTAMP},
			</if>
			<if test="modifyDate != null">
				modify_at = #{modifyDate,jdbcType=TIMESTAMP},
			</if>
			<if test="description != null and description != ''">
				description = #{description,jdbcType=VARCHAR},
			</if>
			<if test="dataFrom != null and dataFrom != ''">
				data_from = #{dataFrom,jdbcType=VARCHAR},
			</if>
			<if test="status != null">
				status = #{status,jdbcType=INTEGER},
			</if>
			<if test="isSystem != null">
				is_system = #{isSystem,jdbcType=INTEGER},
			</if>
		</set>
		WHERE id = #{id,jdbcType=BIGINT}
	</update>

</mapper>