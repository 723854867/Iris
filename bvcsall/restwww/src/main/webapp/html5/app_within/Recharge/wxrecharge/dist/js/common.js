$.extend({init:function(){_this=this,_this.bind=$.requestUrlPrefix+"/pay/bind",_this.unbind=$.requestUrlPrefix+"/pay/unbind",_this.authorization_code="",_this.access_token="",_this.uid="",_this.requestUrlPrefix=$("#interfaceurl").val()+"/restwww",_this.picUrlPrefix=$("#serverUrlimg").val()+"/restwww/download/"},postDate:function(e,t,o){$.ajax({type:"post",url:e,data:t,success:o,beforeSend:function(e){$(".load-box").show(),e.setRequestHeader("access_token",$.getCookie("access_token")),e.setRequestHeader("uid",$.getCookie("uid")),e.setRequestHeader("openId",$.getCookie("openId"))},dataType:"json",complete:function(){$(".load-box").hide()}})},tempTip:function(e,t){var o=$('<div class="tipsWarp">'+e+"</div>");$("body").append(o),setTimeout(function(){o.remove()},2e3),t&&t()},setCookie:function(e,t,o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+s+";path=/"},getCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var s=o[i];" "==s.charAt(0);)s=s.substring(1);if(-1!=s.indexOf(t))return s.substring(t.length,s.length)}return""},clearCookie:function(e){document.cookie=e+"=;expires=0;;path=/"},getUserInfo:function(e,t){$.ajax({url:$.requestUrlPrefix+"/userInfo",data:{access_token:e},type:"get",cache:!1,dataType:"json",success:function(e){"200"==e.code?($.uid=e.result.id,$.setCookie("uid",$.uid,7),t&&t()):$.tempTip(e.message)},error:function(){$.tempTip("获取资源失败！")}})},getAccess_token:function(){$.ajax({url:$.requestUrlPrefix+"/accessToken",data:{grant_type:"authorization_code",code:$.authorization_code,client_id:"c1ebe466-1cdc-4bd3-ab69-77c3561b9dee",client_secret:"d8346ea2-6017-43ed-ad68-19c0f971738b",redirect_uri:"url"},type:"post",async:!1,cache:!1,dataType:"json",beforeSend:function(e){$(".load-box").show(),e.setRequestHeader("access_token",$.getCookie("access_token")),e.setRequestHeader("uid",$.getCookie("uid")),e.setRequestHeader("openID",$.getCookie("openid"))},success:function(e){"200"==e.code?($.access_token=e.result.access_token,$.setCookie("access_token",$.access_token,7),$.getUserInfo($.access_token,$.cbFn)):$.tempTip(e.message)},error:function(){$.tempTip("获得登陆token失败！")}})},getAuthorization_code:function(e,t){$.ajax({url:$.requestUrlPrefix+"/authorize",data:{response_type:"code",client_id:"c1ebe466-1cdc-4bd3-ab69-77c3561b9dee",username:e,password:$.md5(t)},type:"post",async:!1,cache:!1,dataType:"json",success:function(e){"200"==e.code?($.authorization_code=e.result.authorization_code,$.getAccess_token()):"619"==e.code?$.tempTip("绑定失败！此账户已绑定在其他微信上！"):$.tempTip(e.message)},error:function(){$.tempTip("获得登陆授权码失败！")}})},cbFn:function(){$.setCookie("uid",$.uid,7),$.setCookie("access_token",$.access_token,7),$.postDate($.bind,"",function(e){"616"==e.code?$.tempTip("您暂时无法提现，请联系微信客服"):200==e.code?window.location.href="extract":619==e.code&&$.tempTip(e.message)})}}),$.init();