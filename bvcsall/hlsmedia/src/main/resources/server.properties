
# \u72B6\u6001\u62A5\u544A \u6253\u5370\u95F4\u9694
statusreport.interval=10

# \u9ED8\u8BA4\u7684netty\u914D\u7F6E
# \u4F7F\u7528epoll
netty.epoll=true
# netty
# \u5904\u7406\u65B0\u94FE\u63A5\u7684\u7EBF\u7A0B\u6570\uFF0C\u6570\u91CF\u5E94\u8BE5\u7B49\u540C\u4E8E\u76D1\u542C\u7684\u7AEF\u53E3\u6570
netty.boss.threads=2
# \u5904\u7406\u7F51\u7EDC\u541E\u5410\u7684\u7EBF\u7A0B\u6570\uFF0C\u8BBE\u7F6E\u62100\u8868\u793A\u4E3A\u81EA\u9002\u5E94\uFF0C\u5373CPU\u6838\u5FC3\u76842\u500D
netty.worker.threads=0
# \u5904\u7406\u7F51\u7EDC\u541E\u5410\u7684\u65F6\u95F4\u767E\u5206\u6BD4\uFF0C0-100
netty.worker.ioRatio=50
# \u9ED8\u8BA4\u7AEF\u53E3
netty.so.port=63880
# \u7F51\u7EDC\u64CD\u4F5C\u8D85\u65F6\uFF0C\u5355\u4F4Dms
netty.so.timeout=500
netty.so.keepalive=true
# \u670D\u52A1\u5668socket\u914D\u7F6E\u9879\uFF0C\u8FDB\u7AD9socket\u961F\u5217\u957F\u5EA6\uFF0C\u8BBE\u7F6E\u8FC7\u5C0F\uFF0C\u5BB9\u6613\u5728\u7A81\u53D1\u8FDE\u63A5\u6570\u5F88\u5927\u60C5\u51B5\u4E0B\uFF0C\u51FA\u73B0\u62D2\u7EDD\u8FDE\u63A5
netty.so.backlog=2000
# \u6BCF\u4E2Asocket\u7684\u8BFB\u5199\u7F13\u5B58\u5927\u5C0F\uFF0C\u5355\u4F4D\u662Fbytes

# MTU\uFF1A\u6700\u5927\u4F20\u8F93\u5355\u5143, \u4E00\u822C\u60C5\u51B5\u4E0B\u662F 1500\u5B57\u8282
# MSS\uFF1A\u6700\u5927\u5206\u6BB5\u5927\u5C0F\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B MSS=MTU+40
# \u5927\u5C0F\u81F3\u5C11\u5E94\u8BE5\u662F\u8FDE\u63A5\u7684MSS\u7684\u4E09\u500D\uFF0Creceivebuf=MSS*3
# \u8BBE\u7F6E\u8D85\u8FC7RFC1323\u5B9A\u4E49\u768464k\uFF0C\u90A3\u4E48\u5FC5\u987B\u5728\u7ED1\u5B9A\u7AEF\u53E3\u524D\u8BBE\u7F6E\uFF0C\u4EE5\u540Eaccept\u4EA7\u751F\u7684socket\u5C06\u7EE7\u627F\u8FD9\u4E00\u8BBE\u7F6E
# \u5B9E\u9645\u64CD\u4F5C\u8FC7\u7A0B\u4E2D\uFF0C\u8FD9\u4E2A\u503C\u7684\u5927\u5C0F\u6700\u5927\u503C\u8981\u53D6\u51B3\u4E8E\u64CD\u4F5C\u7CFB\u7EDF\u7684\u914D\u7F6E\uFF0C\u6BD4\u5982\uFF1Alinux\u7684net.core.rmem_max
# \u6D88\u606F\u578B\u670D\u52A1\u5668\uFF0C\u8FD9\u4E2A\u503C\u6CA1\u5FC5\u8981\u8BBE\u7F6E\u5F88\u5927\uFF0C\u5982\u679C\u662FHTTP\uFF0CFTP\u7C7B\u670D\u52A1\u5668\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u62101M\uFF0C\u63D0\u9AD8\u7CFB\u7EDF\u541E\u5410\u91CF
netty.so.sendbuf=146432
netty.so.receivebuf=146432
# \u5173\u95EDTCP\u7684\u5305\u538B\u7F29\u7B97\u6CD5\uFF08Nagle's algorithm)
netty.tcp.nodelay=true
# \u7AEF\u53E3\u590D\u7528\uFF0C\u5C3D\u91CF\u8BBE\u7F6E\u6210true,\u907F\u514D\u91CD\u542F\u540E\u65E0\u6CD5\u6B63\u5E38\u76D1\u542C\u7AEF\u53E3
# \u9002\u7528\u573A\u666F\uFF1A
#  1 \u5F53\u4E00\u4E2A\u4F7F\u7528\u672C\u5730\u5730\u5740\u548C\u7AEF\u53E3\u7684socket1\u5904\u4E8ETIME_WAIT\u72B6\u6001\u65F6\uFF0C\u4F60\u542F\u52A8\u7684socket2\u8981\u5360\u7528\u8BE5\u5730\u5740\u548C\u7AEF\u53E3\uFF0C\u5C31\u8981\u7528\u5230\u6B64\u9009\u9879
#  2 SO_REUSEADDR\u5141\u8BB8\u540C\u4E00\u7AEF\u53E3\u4E0A\u542F\u52A8\u4E00\u4E2A\u670D\u52A1\u7684\u591A\u4E2A\u5B9E\u4F8B\uFF08\u591A\u4E2A\u8FDB\u7A0B\uFF09\uFF0C\u4F46\u6BCF\u4E2A\u5B9E\u4F8B\u7ED1\u5B9A\u7684\u5730\u5740\u662F\u4E0D\u80FD\u76F8\u540C\u7684
#  3 SO_REUSEADDR\u5141\u8BB8\u5B8C\u5168\u76F8\u540C\u7684\u5730\u5740\u548C\u7AEF\u53E3\u7684\u91CD\u590D\u7ED1\u5B9A\u3002\u4F46\u8FD9\u53EA\u7528\u4E8EUDP\u7684\u591A\u64AD\uFF0C\u4E0D\u9002\u7528TCP
netty.so.reuseaddr=true



#SO_LINGER\u9009\u9879\uFF0C\u63A7\u5236socket\u5173\u95ED\u540E\u7684\u884C\u4E3A
#Socket.setSoLinger(boolean linger,int timeout)
# 1 linger=false\uFF0Ctimeout=-1 \u5F53socket\u4E3B\u52A8close\uFF0C\u8C03\u7528\u7684\u7EBF\u7A0B\u4F1A\u9A6C\u4E0A\u8FD4\u56DE\uFF0C\u4E0D\u4F1A\u963B\u585E\uFF0C\u7136\u540E\u8FDB\u5165CLOSING\u72B6\u6001\uFF0C\u6B8B\u7559\u5728\u7F13\u51B2\u533A\u4E2D\u7684\u6570\u636E\u5C06\u7EE7\u7EED\u53D1\u9001\u7ED9\u5BF9\u7AEF\uFF0C\u5E76\u4E14\u4E0E\u5BF9\u7AEF\u8FDB\u884CFIN-ACK\u534F\u8BAE\u4EA4\u6362\uFF0C\u6700\u540E\u8FDB\u5165TIME_WAIT\u72B6\u6001
# 2 linger=true\uFF0Ctimeout>0 \u8C03\u7528close\u7684\u7EBF\u7A0B\u5C06\u963B\u585E\uFF0C\u53D1\u751F\u4E24\u79CD\u53EF\u80FD\u7684\u60C5\u51B5\uFF1A\u4E00\u662F\u5269\u4F59\u7684\u6570\u636E\u7EE7\u7EED\u53D1\u9001\uFF0C\u8FDB\u884C\u5173\u95ED\u534F\u8BAE\u4EA4\u6362\uFF0C\u4E8C\u662F\u8D85\u65F6\u8FC7\u671F\uFF0C\u5269\u4F59\u6570\u636E\u5C06\u88AB\u5220\u9664\uFF0C\u8FDB\u884CFIN-ACK\u534F\u8BAE\u4EA4\u6362
# 3 linger=true\uFF0Ctimeout=0 \u8FDB\u884C\u6240\u8C13\u201Chard-close\u201D\uFF0C\u4EFB\u4F55\u5269\u4F59\u7684\u6570\u636E\u5C06\u88AB\u4E22\u5F03\uFF0C\u5E76\u4E14FIN-ACK\u4EA4\u6362\u4E5F\u4E0D\u4F1A\u53D1\u751F\uFF0C\u66FF\u4EE3\u4EA7\u751FRST\uFF0C\u8BA9\u5BF9\u7AEF\u629B\u51FA\u201Cconnection reset\u201D\u7684SocketException
#4 \u614E\u91CD\u4F7F\u7528\u6B64\u9009\u9879\uFF0CTIME_WAIT\u72B6\u6001\u7684\u4EF7\u503C\uFF1A
#     (1) \u53EF\u9760\u5B9E\u73B0TCP\u8FDE\u63A5\u7EC8\u6B62
#     (2) \u5141\u8BB8\u8001\u7684\u5206\u8282\u5728\u7F51\u7EDC\u4E2D\u6D41\u5931\uFF0C\u9632\u6B62\u53D1\u7ED9\u65B0\u7684\u8FDE\u63A5
#     (3) \u6301\u7EED\u65F6\u95F4=2*MSL\uFF08MSL\u4E3A\u6700\u5927\u5206\u8282\u751F\u547D\u5468\u671F\uFF0C\u4E00\u822C\u4E3A30\u79D2\u52302\u5206\u949F\uFF09

netty.so.linger=-1

# \u7531\u670D\u52A1\u5668\u53D1\u8D77\u7684\u5FC3\u8DF3\u95F4\u9694
netty.heartbeat=1200


# \u4EFB\u52A1\u8C03\u5EA6
task.executor.pool-size=8
task.scheduler.pool-size=8


# Hls

# hls\u5B58\u653E\u89C6\u9891\u6587\u4EF6\u7684\u672C\u5730\u76EE\u5F55\u62FC\u63A5\u903B\u8F91\u5982\u4E0B:
# ${hls.mapping.localpath}/${hls.mapping.volume}/${uuid}
# \u5176\u4E2D,{hls.mapping.volume}\u662Fhls.mapping.volumes\u5B57\u7B26\u4E32\u4E2D\u7684\u4E00\u9879

# \u4EE5\u4E0B\u7684\u76EE\u5F55, \u5982\u679C\u662F\u670D\u52A1\u5668\u73AF\u5883, \u9700\u8981\u914D\u7F6E\u5230gfs\u7684\u5377\u4E0A.
# hls\u89C6\u9891\u7684\u672C\u5730\u5B58\u653E\u76EE\u5F55
hls.mapping.localpath=./files
# hls\u53EF\u7528\u7684\u5377\u540D,\u8FD9\u4E2A\u53C2\u6570\u53EA\u5F71\u54CD\u6587\u4EF6\u521B\u5EFA\u7684\u65F6\u5019,\u521B\u5EFA\u540E,\u8FD9\u4E2A\u503C\u4F1A\u5199\u5165\u5230\u6587\u4EF6\u7684uuid(playId)\u4E2D
hls.mapping.volumes=a,b,c
# hls\u89C6\u9891\u7684\u64AD\u653E\u8DEF\u5F84
hls.mapping.playuri=/hls/play
# hls\u89C6\u9891\u7684\u4E0A\u4F20\u8DEF\u5F84
hls.mapping.uploaduri=/hls/upload

# hls\u89C6\u9891\u7684\u4E0A\u4F20\u540E\u72B6\u6001\u66F4\u65B0
# uuid string, \u552F\u4E00\u6807\u8BC6\u89C6\u9891\u7684id
# status string,\u89C6\u9891\u8F6C\u7801\u7684\u72B6\u6001
# upload_ok upload_err \u4E0A\u4F20\u6210\u529F\u6216\u8005\u5931\u8D25
# meta_ok meta_err  \u83B7\u53D6\u5A92\u4F53\u4FE1\u606F\u6210\u529F\u6216\u8005\u5931\u8D25
# capture_ok capture_err \u622A\u56FE\u6210\u529F\u6216\u8005\u5931\u8D25
# transcode_ok transcode_err \u8F6C\u7801\u6210\u529F\u6216\u8005\u5931\u8D25
# unsupported_format \u4E0D\u652F\u6301\u7684\u5A92\u4F53\u683C\u5F0F
# exception \u5904\u7406\u51FA\u73B0\u5F02\u5E38
# w int,\u89C6\u9891\u5BBD\u5EA6
# h int,\u89C6\u9891\u9AD8\u5EA6
# duration double,\u89C6\u9891\u64AD\u653E\u957F\u5EA6
# error string,\u9519\u8BEF\u4FE1\u606F
# \u8FD9\u91CC\u914D\u7F6E\u9EA6\u89C6\u7684\u670D\u52A1\u5668\u56DE\u8C03, tomcat\u91CCrestadmin.war\u7684\u5185\u7F51\u8BBF\u95EE\u5730\u5740
hls.callback.update.status.uri=http://10.18.22.12:8080/restadmin/video/videocallback?playKey=${uuid}&flowStat=${status}&w=${w}&h=${h}&duration=${duration}&error=${error}
# \u8D85\u65F6\u65F6\u95F4
hls.callback.connect.timoutmillis=2000
# netty workers
hls.callback.connect.workers=2

# \u751F\u6210hps\u9875\u9762
hls.test.hps=true
# \u751F\u6210nfo\u6570\u636E
hls.test.nfo=true
# \u751F\u6210html5\u6D4B\u8BD5\u9875\u9762
hls.test.html5=true
# \u751F\u6210flash\u6D4B\u8BD5\u9875\u9762
hls.test.flash=true


